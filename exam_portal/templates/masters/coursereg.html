{% extends "core/base_admin.html" %}
{% load static %}
{% block content %}
<div class="pages-main">
    <h1 class="pages-main-head">Student Course Registrations</h1>
    <div class="note-and-actions">
        <div class="note-text">
            <p style="color: red;"><strong>Note:</strong> Upload course registration data in <strong>.csv</strong> format.</p>
            <p style="color: red;">(Download the sample .csv file and add data in the specified structure to avoid errors)</p>
        </div>
        <div class="add-data">
            <form action="{% url 'masters:coursereg_upload' %}" method="post" enctype="multipart/form-data" style="display:inline;">
                {% csrf_token %}
                <label for="uploadFile" class="control-btn" style="cursor: pointer;">Upload File</label>
                <input type="file" id="uploadFile" name="csv_file" style="display: none;" accept=".csv" onchange="this.form.submit()">
            </form>
            <a href="{% static 'samples/student_reg_courses.csv' %}" download class="control-btn">Download Sample CSV</a>
        </div>
    </div>
    <div class="controls" style="padding: 6px 0;">
        <form id="searchForm" onsubmit="return false;" style="display: flex; align-items: center; gap: 8px;">
            <label for="studentSearch" style="font-size: 0.98rem;">Student ID:</label>
            <input type="text" id="studentSearch" name="studentSearch" placeholder="Enter Student ID" autocomplete="off" style="min-width: 160px; font-size: 0.98rem; padding: 6px 10px; border-radius: 5px;">
            <a href="#" id="searchStudentLink" class="control-btn search-btn" style="margin-top: 0px;">Search</a>
            <a href="#" id="resetStudentSearchLink" class="control-btn reset-btn" style="background: #f1f5f9; color: #1E3A5F; border: 1px solid #cbd5e1; margin-top: 0px;">Reset</a>
        </form>
        <div id="autocomplete-list" class="autocomplete-items" style="position: absolute; z-index: 99;"></div>
    </div>
    <div class="coursereg-actions-bar" id="courseregActionsBar" style="display:none; margin-top: 16px; justify-content: space-between; align-items: center; gap: 16px;">
        <div class="pagination-bar" id="courseregPaginationBar" style="display:flex;">
            <div id="coursereg-pagination"></div>
        </div>
        <div class="actions" id="courseregActions" style="display:flex; align-items: center; gap: 16px;">
            <button type="button" id="printCourseRegBtn"><img src="https://img.icons8.com/?size=100&id=85372&format=png&color=ffffff" alt="Print_img">Print</button>
            <button type="button" id="downloadCourseRegBtn"><img src="https://img.icons8.com/?size=100&id=83159&format=png&color=ffffff" alt="Download_img">Download Data</button>
        </div>
    </div>
    <div class="table" id="courseregTableContainer" style="display:none; margin-top: 24px;">
        <table id="coursereg-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Student ID</th>
                    <th>Student Name</th>
                    <th>Course Code</th>
                    <th>Course Name</th>
                    <th>Academic Year</th>
                    <th>Semester</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="coursereg-list">
                {# Table body will be filled by AJAX #}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}