{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Admin Portal{% endblock %}</title>

    <!-- Global CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">

</head>
<body>

<!-- Mobile hamburger -->
<button class="hamburger" id="openSidebarBtn" aria-label="Open sidebar">
    <span></span>
    <span></span>
    <span></span>
</button>

<!-- Popup Messages -->
{% if messages %}
<div id="popup-messages">
    {% for message in messages %}
        <div class="popup-message popup-{{ message.tags }}" tabindex="0">{{ message }}</div>
    {% endfor %}
</div>
<script>
// Persistent popup: dismiss only when clicking outside
document.addEventListener('mousedown', function(event) {
    var popup = document.getElementById('popup-messages');
    if (!popup) return;
    if (!popup.contains(event.target)) {
        popup.style.display = 'none';
    }
});
</script>
{% endif %}

<div id="page">
    <!-- SIDEBAR -->
    <div id="sidebar">
        <button class="close-btn" id="closeSidebarBtn" aria-label="Close sidebar">&times;</button>

        <div class="sidebar-pic">
            <img src="{% static 'img/user.jpg' %}" 
                 alt="User Profile" 
                 style="width:50px; height:50px; border-radius:50%; padding:7px;">
            <p style="font-size:22px; font-family:'Times New Roman', Times, serif; color:white;">
                {{ user.username }}
            </p>
        </div>

        <div class="sidebar-links">
            <ul>

                <!-- Dashboard -->
                <li>
                    <img src="https://img.icons8.com/?size=100&id=6ocfyfPqD0qz&format=png&color=ffffff" alt="Dashboard Icon">
                    <a href="{% url 'core:dashboard' %}" data-page="dashboard">Dashboard</a>
                </li>

                <!-- Student Management -->
                <li>
                    <img src="https://img.icons8.com/ios-filled/50/ffffff/student-male.png" alt="Student Icon">
                    <a href="{% url 'masters:student' %}" data-page="student">Student Management</a>
                </li>

                <!-- Faculty Management -->
                <li>
                    <img src="https://img.icons8.com/ios-filled/50/ffffff/teacher.png" alt="Faculty Icon">
                    <a href="{% url 'masters:faculty' %}" data-page="faculty">Faculty Management</a>
                </li>

                <!-- Room Management -->
                <li>
                    <img src="https://img.icons8.com/ios-filled/50/ffffff/classroom.png" alt="Room Icon">
                    <a href="{% url 'masters:rooms' %}" data-page="rooms">Room Management</a>
                </li>

                <!-- Course Management -->
                <li>
                    <img src="https://img.icons8.com/ios-filled/50/ffffff/book.png" alt="Course Icon">
                    <a href="{% url 'masters:courses' %}" data-page="courses">Course Management</a>
                </li>

                <!-- Student Courses Data -->
                <li>
                    <img src="https://img.icons8.com/ios-filled/50/ffffff/open-book.png" alt="Course Data Icon">
                    <a href="{% url 'masters:coursereg' %}" data-page="coursereg">Student Courses Data</a>
                </li>

                <!-- Exam Schedule -->
                <li>
                    <img src="https://img.icons8.com/?size=100&id=65285&format=png&color=FFFFFF" alt="Exam Icon">
                    <a href="{% url 'operations:exams' %}" data-page="exams">Exam Schedule</a>
                </li>

                <!-- Room Allocation -->
                <li>
                    <img src="https://img.icons8.com/ios-filled/50/ffffff/floor-plan.png" alt="Room Allocation Icon">
                    <a href="{% url 'operations:roomalloc' %}" data-page="roomalloc">Room Allocation</a>
                </li>

                <!-- Reports -->
                <li>
                    <img src="https://img.icons8.com/ios-filled/50/ffffff/combo-chart.png" alt="Reports Icon">
                    <a href="{% url 'operations:report' %}" data-page="report">Reports & Analytics</a>
                </li>

                <!-- Attendance -->
                <li>
                    <img src="https://img.icons8.com/ios-filled/50/ffffff/attendance-mark.png" alt="Attendance Icon">
                    <a href="{% url 'operations:attendence' %}" data-page="attendence">Attendance Data</a>
                </li>

                <!-- Notifications -->
                <li>
                    <img src="https://img.icons8.com/ios-filled/50/ffffff/appointment-reminders.png" alt="Notifications Icon">
                    <a href="{% url 'core:notifications' %}" data-page="notifications">Notifications</a>
                </li>

                <!-- Settings -->
                <li>
                    <img src="https://img.icons8.com/ios-filled/50/ffffff/settings.png" alt="Settings Icon">
                    <a href="{% url 'core:settings' %}" data-page="settings">Settings</a>
                </li>

                <!-- Logout -->
                <li>
                    <img src="https://img.icons8.com/?size=100&id=9p6VXsmLzvTt&format=png&color=ffffff" alt="Logout Icon">
                    <a href="{% url 'accounts:logout' %}">Logout</a>
                </li>

            </ul>
        </div>

    </div>

    <!-- MAIN CONTENT -->
    <div class="content" id="main-content">
        {% block content %}{% endblock %}
    </div>
</div>

<!-- Sidebar JS -->
<script>
const sidebar = document.getElementById('sidebar');
const openBtn = document.getElementById('openSidebarBtn');
const closeBtn = document.getElementById('closeSidebarBtn');
const mainContent = document.getElementById('main-content');

function openSidebar() {
    sidebar.classList.add('active');
    document.body.classList.add('sidebar-open');
    openBtn.style.display = 'none';
}

function closeSidebar() {
    sidebar.classList.remove('active');
    document.body.classList.remove('sidebar-open');
    openBtn.style.display = 'flex';
}

openBtn.addEventListener('click', openSidebar);
closeBtn.addEventListener('click', closeSidebar);

mainContent.addEventListener('click', function () {
    if (window.innerWidth <= 900 && sidebar.classList.contains('active')) {
        closeSidebar();
    }
});

function handleResize() {
    if (window.innerWidth > 900) {
        sidebar.classList.remove('active');
        document.body.classList.remove('sidebar-open');
        openBtn.style.display = 'none';
    } else {
        openBtn.style.display = sidebar.classList.contains('active') ? 'none' : 'flex';
    }
}
window.addEventListener('resize', handleResize);
window.addEventListener('DOMContentLoaded', handleResize);
</script>

<!-- Global JS -->
<script src="{% static 'js/scripts.js' %}"></script>

</body>
</html>
